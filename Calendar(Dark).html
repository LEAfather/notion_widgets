<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Calendar (Hangzhou Time, Square Style)</title>
<style>
@import url('https://fonts.googleapis.com/css?family=Nunito:400,600');

:root {
    --calendar-bg-color: #262829;
    --calendar-font-color: #FFF;
    --weekdays-border-bottom-color: #404040;
    --calendar-date-hover-color: #505050;
    --calendar-current-date-color: #1b1f21;
    --calendar-today-color: #2196F3;
    --calendar-today-innerborder-color: #000;
    --calendar-nextprev-bg-color: #1a1f21;
}

* {
    padding: 0;
    margin: 0;
}

body {
    background-color: #262829;
}

.calendar {
    font-family: 'Nunito', sans-serif;
    width: 100%;
    max-width: 600px;
    margin: 40px auto;
    background: var(--calendar-bg-color);
    color: var(--calendar-font-color);
    border-radius: 10px;
    overflow: hidden;
}

.calendar-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px;
    background: var(--calendar-nextprev-bg-color);
}

.calendar-header h1 {
    font-size: 20px;
    font-weight: 600;
}

.calendar-header button {
    background: none;
    border: none;
    color: var(--calendar-font-color);
    font-size: 18px;
    cursor: pointer;
    transition: 0.3s;
}

.calendar-header button:hover {
    color: var(--calendar-today-color);
}

.calendar-weekdays {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    text-align: center;
    padding: 10px 0;
    border-bottom: 1px solid var(--weekdays-border-bottom-color);
}

.calendar-weekdays div {
    font-weight: 600;
}

.calendar-days {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    text-align: center;
    padding: 20px;
}

.calendar-days div {
    padding: 12px;
    cursor: pointer;
    border-radius: 0;  /* ✅ 네모 칸 */
    transition: 0.3s;
}

.calendar-days div:hover {
    background: var(--calendar-date-hover-color);
}

.calendar-days .today {
    background: var(--calendar-today-color);
    border: 2px solid var(--calendar-today-innerborder-color);
    color: #fff;
    font-weight: bold;
    border-radius: 0;  /* ✅ 오늘도 네모 */
}

.calendar-days .inactive {
    color: #555;
}
</style>
</head>
<body>

<div class="calendar">
    <div class="calendar-header">
        <button id="prev">&#10094;</button>
        <h1 id="monthYear"></h1>
        <button id="next">&#10095;</button>
    </div>
    <div class="calendar-weekdays">
        <div>Sun</div>
        <div>Mon</div>
        <div>Tue</div>
        <div>Wed</div>
        <div>Thu</div>
        <div>Fri</div>
        <div>Sat</div>
    </div>
    <div class="calendar-days" id="days"></div>
</div>

<script>
const daysContainer = document.getElementById("days");
const monthYear = document.getElementById("monthYear");
const prevBtn = document.getElementById("prev");
const nextBtn = document.getElementById("next");

// Hangzhou timezone
let options = { timeZone: "Asia/Shanghai" };
let formatter = new Intl.DateTimeFormat("en-US", { ...options, year: "numeric", month: "long", day: "numeric" });
let nowParts = formatter.formatToParts(new Date());

// today's date (Hangzhou time)
let todayYear = parseInt(nowParts.find(p => p.type === "year").value);
let todayMonth = new Date(formatter.format(new Date())).getMonth();
let todayDate = parseInt(nowParts.find(p => p.type === "day").value);

let currentMonth = todayMonth;
let currentYear = todayYear;

const months = [
  "January", "February", "March", "April", "May", "June",
  "July", "August", "September", "October", "November", "December"
];

function renderCalendar() {
  daysContainer.innerHTML = "";

  let firstDay = new Date(currentYear, currentMonth, 1).getDay();
  let lastDate = new Date(currentYear, currentMonth + 1, 0).getDate();
  let prevLastDate = new Date(currentYear, currentMonth, 0).getDate();

  monthYear.innerHTML = `${months[currentMonth]} ${currentYear}`;

  for (let i = firstDay; i > 0; i--) {
    let day = document.createElement("div");
    day.classList.add("inactive");
    day.textContent = prevLastDate - i + 1;
    daysContainer.appendChild(day);
  }

  for (let i = 1; i <= lastDate; i++) {
    let day = document.createElement("div");
    day.textContent = i;

    if (i === todayDate && currentMonth === todayMonth && currentYear === todayYear) {
      day.classList.add("today");
    }

    daysContainer.appendChild(day);
  }

  let totalCells = daysContainer.childElementCount;
  let nextDays = 42 - totalCells;
  for (let i = 1; i <= nextDays; i++) {
    let day = document.createElement("div");
    day.classList.add("inactive");
    day.textContent = i;
    daysContainer.appendChild(day);
  }
}

prevBtn.addEventListener("click", () => {
  currentMonth--;
  if (currentMonth < 0) {
    currentMonth = 11;
    currentYear--;
  }
  renderCalendar();
});

nextBtn.addEventListener("click", () => {
  currentMonth++;
  if (currentMonth > 11) {
    currentMonth = 0;
    currentYear++;
  }
  renderCalendar();
});

renderCalendar();
</script>

</body>
</html>
